# 📈 日本株ダッシュボード

Streamlitベースの日本株価分析ダッシュボードです。CSVデータを使用して、インタラクティブな株価チャート、財務分析、配当分析を提供します。

## ✨ 主要機能

### 📊 株価分析
- **インタラクティブな株価チャート**
  - ローソク足チャート
  - 出来高表示
  - テクニカル指標（RSI、MACD、移動平均線など）
- **リアルタイム分析**
  - 現在価格と前日比
  - 52週高値・安値
  - 出来高分析
- **詳細データ表示**
  - 株価データのテーブル表示
  - 企業基本情報

### 💰 財務分析
- **損益計算書の可視化**
  - 主要財務指標の時系列表示
  - 収益性分析（売上高成長率、営業利益率、純利益率）
- **貸借対照表の可視化**
  - 資産・負債・資本の推移
- **キャッシュフロー計算書の可視化**
  - 営業・投資・財務キャッシュフローの推移
- **財務比率の分析**
  - 17種類の財務比率を表示

### 💎 配当分析
- **配当サマリー**
  - 配当利回り、配当頻度、配当成長率、配当一貫性
  - 総配当額、平均配当額、配当回数
- **配当履歴チャート**
  - 年次配当額と3年移動平均トレンド
- **配当利回り推移**
  - 株価と配当額から計算した配当利回り
- **配当成長率分析**
  - 年次配当成長率と累積配当成長率
- **配当一貫性分析**
  - 年間配当回数の推移

### 📰 ニュース・センチメント分析
- **ニュースサマリー**
  - 総ニュース数、ニュース頻度、全体的なセンチメント
  - センチメント分布（ポジティブ、ニュートラル、ネガティブ）
  - ニュース多様性と信頼度
- **センチメント概要チャート**
  - 円グラフでセンチメント分布を可視化
  - 色分けによる直感的な理解
- **センチメントスコア**
  - ゲージチャートでセンチメントスコアを表示
  - -1（ネガティブ）から+1（ポジティブ）の範囲
- **センチメント推移**
  - 日付ごとのニュース数の推移
  - 時系列でのニュース活動の可視化
- **ニュースソース分析**
  - ニュースソース別の記事数
  - 情報源の多様性を確認
- **ニュース一覧**
  - 最新10件のニュースを表示
  - 日付、タイトル、要約、ソース、リンクを表示

### 🏢 セクター分析
- **セクターサマリー**
  - 総銘柄数、セクター数、平均価格変動率、総時価総額
  - セクター別の詳細統計（銘柄数、平均価格変動率、時価総額、総従業員数）
- **セクター概要チャート**
  - 円グラフでセクター別銘柄数を可視化
  - 各セクターの銘柄数と割合を表示
- **セクター別パフォーマンスチャート**
  - セクター別平均価格変動率（棒グラフ）
  - セクター別時価総額（棒グラフ）
  - 2つのサブプロットで包括的な比較
- **業界内分析チャート**
  - 選択されたセクター内の業界分析
  - バブルチャートで業界の相対的な位置を表示
  - 時価総額、価格変動率、銘柄数を視覚化
- **銘柄比較チャート**
  - セクター内の銘柄比較
  - バブルチャートで銘柄の相対的な位置を表示
  - 時価総額、価格変動率、従業員数を視覚化
- **銘柄一覧**
  - 選択されたセクターの銘柄一覧（最大20銘柄）
  - 銘柄コード、会社名、業界、時価総額、価格変動率、従業員数を表示

### 🔍 銘柄検索・選択
- 銘柄コードまたは会社名での検索
- 利用可能な銘柄の一覧表示
- データ品質インジケーター（⚠️マークでデータ不足を表示）

## 🚀 セットアップ

### 前提条件

- Python 3.13以上
- uv（Pythonパッケージマネージャー）

### インストール

1. リポジトリをクローン
```bash
git clone https://github.com/Akira-Osanai/j-stocks-dashboard.git
cd j-stocks-dashboard
```

2. 依存関係をインストール
```bash
uv sync
```

3. アプリケーションを起動
```bash
uv run streamlit run app.py
```

## 📁 プロジェクト構造

```
j-stocks-dashboard/
├── app.py                          # メインアプリケーション
├── pyproject.toml                  # プロジェクト設定
├── src/
│   ├── data/
│   │   └── loader.py              # データローダー
│   ├── components/
│   │   └── charts.py              # チャートコンポーネント
│   └── utils/                     # ユーティリティ
├── output/                        # 株価データ（CSVファイル）
│   ├── 7203/                     # トヨタ自動車のデータ例
│   │   ├── stock_data/
│   │   ├── company_info/
│   │   ├── technical_data/
│   │   └── financial_data/
│   └── ...
└── README.md
```

## 📖 使い方

### 1. アプリケーションの起動

```bash
uv run streamlit run app.py
```

ブラウザで `http://localhost:8501` にアクセスします。

### 2. 銘柄の選択

**左サイドバー**で以下の手順で銘柄を選択します：

1. **検索バー**に銘柄コード（例：`7203`）または会社名（例：`トヨタ`）を入力
2. 検索結果から目的の銘柄を選択
3. ドロップダウンメニューから銘柄を確定

⚠️ **データ品質インジケーター**：
- 通常の銘柄名：データが十分
- 銘柄名 + ⚠️：データが不足している可能性

### 3. タブの使い方

#### 📈 株価分析タブ
- **基本統計情報**：現在価格、前日比、52週高値・安値
- **株価チャート**：ローソク足チャートとテクニカル指標
- **詳細データ**：株価データのテーブル表示

#### 💰 財務分析タブ
- **データ品質表示**：各財務データの不足率を表示
- **損益計算書**：売上、利益の推移を時系列で表示
- **貸借対照表**：資産、負債、資本の推移
- **キャッシュフロー計算書**：キャッシュフローの推移
- **収益性分析**：成長率と利益率の分析
- **財務比率**：各種財務比率の表示

#### 💎 配当分析タブ
- **配当サマリー**：重要な配当指標の一覧
- **配当履歴**：年次配当額とトレンド
- **配当利回り推移**：株価に対する配当利回り
- **配当成長率**：年次と累積の成長率
- **配当一貫性**：配当の安定性

### 4. チャート設定

**左サイドバー**で以下の設定が可能です：

- **出来高を表示**：チャートに出来高を表示するか
- **チャートの高さ**：400px〜800pxで調整
- **期間設定**：特定の期間のデータのみ表示

### 5. データの解釈

#### 財務分析の見方
- **上昇傾向**：その指標が年々改善している
- **下降傾向**：その指標が年々悪化している
- **平坦**：その指標が安定している
- **変動**：その指標が不安定で変動が大きい

#### 配当分析の見方
- **配当利回り**：株価に対する配当の割合（高いほど良い）
- **配当成長率**：配当の年次成長率（プラスが望ましい）
- **配当一貫性**：配当の安定性スコア（高いほど安定）

## 📊 データ形式

このダッシュボードは以下のCSVファイルを読み込みます：

### 株価データ
- `stock_data.csv`: 株価データ（OHLCV）
- `technical_indicators.csv`: テクニカル指標

### 企業情報
- `company_info.csv`: 企業基本情報

### 財務データ
- `income_statement.csv`: 損益計算書
- `balance_sheet.csv`: 貸借対照表
- `cashflow.csv`: キャッシュフロー計算書
- `financial_ratios.csv`: 財務比率

### 配当データ
- `dividend_data.csv`: 配当履歴
- `dividend_analysis.csv`: 配当分析結果

詳細なデータ仕様については、`CSV_FIELDS_REFERENCE.md`を参照してください。

## 🎨 カスタマイズ

### チャートの設定

`src/components/charts.py`でチャートの外観や機能をカスタマイズできます。

### データローダーの拡張

`src/data/loader.py`で新しいデータソースやフィルタリング機能を追加できます。

## 🤝 貢献

プルリクエストやイシューの報告を歓迎します。

## 📄 ライセンス

このプロジェクトはMITライセンスの下で公開されています。

## 📚 ドキュメント

- **[使い方ガイド](USAGE_GUIDE.md)**: 詳細な使い方と画面の見方
- **[API仕様書](API_REFERENCE.md)**: 内部APIの詳細仕様
- **[CSVフィールド仕様](CSV_FIELDS_REFERENCE.md)**: データ形式の詳細

## 🔗 関連リンク

- [Streamlit Documentation](https://docs.streamlit.io/)
- [Plotly Documentation](https://plotly.com/python/)
- [Pandas Documentation](https://pandas.pydata.org/docs/)
